function headerTyping(){var t=$(".header-logo");t.find(".char").remove();var n=t.children("span"),e=t.children("small"),i=0;function o(t,n){for(var e=0;e<n.length;e++){var o=$("<span/>",{text:n.charAt(e),class:"char char-"+(i+1)});t.append(o),i++}}o(n,n.children("span").textNode()),o(e,e.children("span").textNode())}function toggleIsClick(){$(this).toggleClass("is-click")}function isElementOnScreen(t){var n=$(window),e=n.scrollTop(),o=e+n.height(),i=e+n.height()/2,a=t.offset().top,s=a+t.height();return a<o&&e<=a||a<e&&i<s}function replaceAt(t,n,e){return t.substring(0,n)+e+t.substring(n+1)}$(function(){oLng.init(),oNav.init(),$(document).on("scroll",function(t){oNav.upd()})}),oLng={sDefault:"ru",init:function(){var n=this;localStorage.getItem("lng")&&(n.sDefault=localStorage.getItem("lng")),$.getJSON("/lang.json",function(t){n.oStrings=t,n.toggler($('[data-lng="'+n.sDefault+'"]')),n.set(n.sDefault,function(){$("[data-lng]").click(function(){n.toggler($(this))})})}).fail(function(t,n,e){console.error(e)})},toggler:function(t){t.addClass("active").siblings().removeClass("active");var n=t.data("lng");this.set(n,function(){headerTyping()})},set:function(e,o){var i=this;i.oStrings[e]||(e=i.sDefault),i.sCurrent=e,$("[lngstr]").each(function(t){var n=$(this).attr("lngstr");$(this).animate({opacity:0},200,function(){$(this).html(i.oStrings[e][n]),$(this).animate({opacity:1},200,function(){$("[lngstr]").length==t+1&&"function"==typeof o&&o()})})}),localStorage.setItem("lng",e);var t=window.location.protocol+"//"+window.location.host+window.location.pathname;t=t.replace(/\/$/,""),"ru"!=e&&(t+="?lng="+e),window.history.pushState({},null,t)}},oNav={hash:"",elems:null,istimeout:!1,init:function(){this.elems=$(".section[id]"),oNav.upd()},upd:function(){oNav.istimeout&&clearTimeout(oNav.istimeout),oNav.istimeout=setTimeout(function(){oNav.elems.each(function(){if(isElementOnScreen($(this)))return oNav.elems.removeClass("active"),$(this).addClass("active"),oNav.hash="#"+$(this).attr("id"),!1;oNav.hash=""}),oNav.set()},20)},set:function(){0<oNav.hash.length?history.pushState(null,null,oNav.hash):history.pushState(null,null,window.location.pathname+window.location.search)}},function(e){e.fn.textNode=function(t,n){return arguments.length<2&&(n=""),arguments.length<1&&(t=""),e.map(this,function(t){return function(t,n){for(var e=[],o=t.firstChild;o;o=o.nextSibling)3==o.nodeType&&e.push(o.nodeValue);return e.join(n)}(t,n)}).join(t)}}(jQuery),$(document).ready(function(){var t=$("#preloader");t.addClass("load"),setTimeout(function(){t.hide()},600)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGVhZGVyVHlwaW5nIiwiZUxvZ28iLCIkIiwiZmluZCIsInJlbW92ZSIsImVOYW1lIiwiY2hpbGRyZW4iLCJlU3RhdHVzIiwibCIsIl9hY3Rpb24iLCJlRWxlbSIsInNUZXh0IiwiaSIsImxlbmd0aCIsImVDaGFyIiwidGV4dCIsImNoYXJBdCIsImNsYXNzIiwiYXBwZW5kIiwidGV4dE5vZGUiLCJ0b2dnbGVJc0NsaWNrIiwidGhpcyIsInRvZ2dsZUNsYXNzIiwiaXNFbGVtZW50T25TY3JlZW4iLCJlbGVtIiwid2luIiwid2luZG93IiwidG9wU2NyZWVuIiwic2Nyb2xsVG9wIiwiYm90dG9tU2NyZWVuIiwiaGVpZ2h0IiwibWlkZGxlU2NyZWVuIiwidG9wRWxlbSIsIm9mZnNldCIsInRvcCIsImJvdHRvbUVsZW0iLCJyZXBsYWNlQXQiLCJzIiwibiIsInQiLCJzdWJzdHJpbmciLCJvTG5nIiwiaW5pdCIsIm9OYXYiLCJkb2N1bWVudCIsIm9uIiwiZSIsInVwZCIsInNEZWZhdWx0IiwiX3RoaXMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0SlNPTiIsImRhdGEiLCJvU3RyaW5ncyIsInRvZ2dsZXIiLCJzZXQiLCJjbGljayIsImZhaWwiLCJ0eXBlIiwiaW5mbyIsImNvbnNvbGUiLCJlcnJvciIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxuZyIsImYiLCJzQ3VycmVudCIsImVhY2giLCJzTmFtZSIsImF0dHIiLCJhbmltYXRlIiwib3BhY2l0eSIsImh0bWwiLCJzZXRJdGVtIiwic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImhhc2giLCJlbGVtcyIsImlzdGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJmbiIsImVsZW1lbnRTZXBhcmF0b3IiLCJub2RlU2VwYXJhdG9yIiwiYXJndW1lbnRzIiwibWFwIiwiZWwiLCJzZXBhcmF0b3IiLCJ0ZXh0Q29udGVudHMiLCJjaGxkIiwiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwibm9kZVR5cGUiLCJwdXNoIiwibm9kZVZhbHVlIiwiam9pbiIsImVsZW1lbnRUZXh0IiwialF1ZXJ5IiwicmVhZHkiLCJlUHJlbG9hZCIsImhpZGUiXSwibWFwcGluZ3MiOiJBQVdBLFNBQVNBLGVBQ1IsSUFBSUMsRUFBUUMsRUFBRSxnQkFDZEQsRUFBTUUsS0FBSyxTQUFTQyxTQUVwQixJQUFJQyxFQUFRSixFQUFNSyxTQUFTLFFBQzFCQyxFQUFVTixFQUFNSyxTQUFTLFNBQ3pCRSxFQUFJLEVBS0wsU0FBU0MsRUFBU0MsRUFBT0MsR0FDeEIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FDdEMsSUFBSUUsRUFBUVosRUFBRSxVQUFXLENBQ3ZCYSxLQUFNSixFQUFNSyxPQUFPSixHQUNuQkssTUFBTyxjQUFlVCxFQUFFLEtBRTFCRSxFQUFNUSxPQUFPSixHQUNiTixLQVZGQyxFQUFRSixFQUFPQSxFQUFNQyxTQUFTLFFBQVFhLFlBQ3RDVixFQUFRRixFQUFTQSxFQUFRRCxTQUFTLFFBQVFhLFlBMkczQyxTQUFTQyxnQkFDUmxCLEVBQUVtQixNQUFNQyxZQUFZLFlBR3JCLFNBQVNDLGtCQUFtQkMsR0FDM0IsSUFBSUMsRUFBTXZCLEVBQUV3QixRQUNYQyxFQUFZRixFQUFJRyxZQUNoQkMsRUFBZUYsRUFBWUYsRUFBSUssU0FDL0JDLEVBQWVKLEVBQVlGLEVBQUlLLFNBQVcsRUFDMUNFLEVBQVVSLEVBQUtTLFNBQVNDLElBQ3hCQyxFQUFhSCxFQUFVUixFQUFLTSxTQUU3QixPQUFTRSxFQUFVSCxHQUE2QkYsR0FBWEssR0FBMEJBLEVBQVVMLEdBQTRCSSxFQUFiSSxFQUd6RixTQUFTQyxVQUFXQyxFQUFHQyxFQUFHQyxHQUN6QixPQUFPRixFQUFFRyxVQUFVLEVBQUdGLEdBQUtDLEVBQUlGLEVBQUVHLFVBQVVGLEVBQUksR0EvSWhEcEMsRUFBRSxXQUVEdUMsS0FBS0MsT0FFTEMsS0FBS0QsT0FDTHhDLEVBQUUwQyxVQUFVQyxHQUFHLFNBQVUsU0FBVUMsR0FDbENILEtBQUtJLFVBNEJQTixLQUFPLENBQ05PLFNBQVUsS0FDVk4sS0FBTSxXQUNMLElBQUlPLEVBQVE1QixLQUVSNkIsYUFBYUMsUUFBUSxTQUFRRixFQUFNRCxTQUFXRSxhQUFhQyxRQUFRLFFBRXZFakQsRUFBRWtELFFBQVEsYUFBYyxTQUFVQyxHQUNqQ0osRUFBTUssU0FBV0QsRUFFakJKLEVBQU1NLFFBQVFyRCxFQUFFLGNBQWUrQyxFQUFNRCxTQUFVLE9BRS9DQyxFQUFNTyxJQUFJUCxFQUFNRCxTQUFVLFdBRXpCOUMsRUFBRSxjQUFjdUQsTUFBTSxXQUNyQlIsRUFBTU0sUUFBUXJELEVBQUVtQixhQUdoQnFDLEtBQUssU0FBVVosRUFBR2EsRUFBTUMsR0FDMUJDLFFBQVFDLE1BQU1GLE1BR2hCTCxRQUFTLFNBQVU3QyxHQUdsQkEsRUFBTXFELFNBQVMsVUFBVUMsV0FBV0MsWUFBWSxVQUNoRCxJQUFJQyxFQUFNeEQsRUFBTTJDLEtBQUssT0FIVGhDLEtBS05tQyxJQUFJVSxFQUFLLFdBQ2RsRSxrQkFHRndELElBQUssU0FBVVUsRUFBS0MsR0FDbkIsSUFBSWxCLEVBQVE1QixLQUNQNEIsRUFBTUssU0FBU1ksS0FBTUEsRUFBTWpCLEVBQU1ELFVBRXRDQyxFQUFNbUIsU0FBV0YsRUFFakJoRSxFQUFFLFlBQVltRSxLQUFLLFNBQVV6RCxHQUM1QixJQUFJMEQsRUFBUXBFLEVBQUVtQixNQUFNa0QsS0FBSyxVQUN6QnJFLEVBQUVtQixNQUFNbUQsUUFBUSxDQUFDQyxRQUFTLEdBQUksSUFBSyxXQUNsQ3ZFLEVBQUVtQixNQUFNcUQsS0FBS3pCLEVBQU1LLFNBQVNZLEdBQUtJLElBQ2pDcEUsRUFBRW1CLE1BQU1tRCxRQUFRLENBQUNDLFFBQVMsR0FBSSxJQUFLLFdBQzlCdkUsRUFBRSxZQUFZVyxRQUFVRCxFQUFFLEdBQ2IsbUJBQUx1RCxHQUFpQkEsVUFPaENqQixhQUFheUIsUUFBUSxNQUFPVCxHQUU1QixJQUFJVSxFQUFPbEQsT0FBT21ELFNBQVNDLFNBQVUsS0FBTXBELE9BQU9tRCxTQUFTRSxLQUFPckQsT0FBT21ELFNBQVNHLFNBQ2xGSixFQUFPQSxFQUFLSyxRQUFRLE1BQU8sSUFDaEIsTUFBUGYsSUFBYVUsR0FBUSxRQUFTVixHQUNsQ3hDLE9BQU93RCxRQUFRQyxVQUFVLEdBQUksS0FBTVAsS0FJckNqQyxLQUFPLENBQ055QyxLQUFNLEdBQ05DLE1BQU8sS0FDUEMsV0FBVyxFQUNYNUMsS0FBTSxXQUNMckIsS0FBS2dFLE1BQVFuRixFQUFFLGdCQUNmeUMsS0FBS0ksT0FFTkEsSUFBSyxXQUNBSixLQUFLMkMsV0FBV0MsYUFBYTVDLEtBQUsyQyxXQUV0QzNDLEtBQUsyQyxVQUFZRSxXQUFXLFdBQzNCN0MsS0FBSzBDLE1BQU1oQixLQUFLLFdBQ2YsR0FBSTlDLGtCQUFrQnJCLEVBQUVtQixPQUl2QixPQUhBc0IsS0FBSzBDLE1BQU1wQixZQUFZLFVBQ3ZCL0QsRUFBRW1CLE1BQU0wQyxTQUFTLFVBQ2pCcEIsS0FBS3lDLEtBQU8sSUFBS2xGLEVBQUVtQixNQUFNa0QsS0FBSyxPQUN2QixFQUVQNUIsS0FBS3lDLEtBQU8sS0FHZHpDLEtBQUthLE9BQ0gsS0FFSkEsSUFBSyxXQUNtQixFQUFuQmIsS0FBS3lDLEtBQUt2RSxPQUNicUUsUUFBUUMsVUFBVSxLQUFNLEtBQU14QyxLQUFLeUMsTUFFbkNGLFFBQVFDLFVBQVUsS0FBTSxLQUFNekQsT0FBT21ELFNBQVNHLFNBQVd0RCxPQUFPbUQsU0FBU1ksVUF1QjNFLFNBQVV2RixHQVVWQSxFQUFFd0YsR0FBR3ZFLFNBQVcsU0FBVXdFLEVBQWtCQyxHQUczQyxPQUZJQyxVQUFVaEYsT0FBTyxJQUFHK0UsRUFBYyxJQUNsQ0MsVUFBVWhGLE9BQU8sSUFBRzhFLEVBQWlCLElBQ2xDekYsRUFBRTRGLElBQUl6RSxLQUFNLFNBQVUwRSxHQUM1QixPQWJGLFNBQXNCQSxFQUFJQyxHQUV6QixJQURBLElBQUlDLEVBQWUsR0FDWEMsRUFBT0gsRUFBR0ksV0FBWUQsRUFBTUEsRUFBT0EsRUFBS0UsWUFDMUIsR0FBakJGLEVBQUtHLFVBQ1JKLEVBQWFLLEtBQUtKLEVBQUtLLFdBR3pCLE9BQU9OLEVBQWFPLEtBQUtSLEdBTWpCUyxDQUFZVixFQUFJSCxLQUNyQlksS0FBS2IsSUFmVixDQWlCR2UsUUFFSHhHLEVBQUUwQyxVQUFVK0QsTUFBTSxXQUNqQixJQUFJQyxFQUFXMUcsRUFBRSxjQUNqQjBHLEVBQVM3QyxTQUFTLFFBQ2xCeUIsV0FBVyxXQUNWb0IsRUFBU0MsUUFDUCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XHJcblxyXG5cdG9MbmcuaW5pdCgpO1xyXG5cclxuXHRvTmF2LmluaXQoKTtcclxuXHQkKGRvY3VtZW50KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdG9OYXYudXBkKCk7XHJcblx0fSk7XHJcblxyXG59KVxyXG5cclxuZnVuY3Rpb24gaGVhZGVyVHlwaW5nICgpIHtcclxuXHR2YXIgZUxvZ28gPSAkKCcuaGVhZGVyLWxvZ28nKTtcclxuXHRlTG9nby5maW5kKCcuY2hhcicpLnJlbW92ZSgpO1xyXG5cclxuXHR2YXIgZU5hbWUgPSBlTG9nby5jaGlsZHJlbignc3BhbicpLFxyXG5cdFx0ZVN0YXR1cyA9IGVMb2dvLmNoaWxkcmVuKCdzbWFsbCcpLFxyXG5cdFx0bCA9IDA7XHJcblxyXG5cdF9hY3Rpb24oZU5hbWUsIGVOYW1lLmNoaWxkcmVuKCdzcGFuJykudGV4dE5vZGUoKSk7XHJcblx0X2FjdGlvbihlU3RhdHVzLCBlU3RhdHVzLmNoaWxkcmVuKCdzcGFuJykudGV4dE5vZGUoKSk7XHJcblxyXG5cdGZ1bmN0aW9uIF9hY3Rpb24gKGVFbGVtLCBzVGV4dCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzVGV4dC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgZUNoYXIgPSAkKCc8c3Bhbi8+Jywge1xyXG5cdFx0XHRcdFx0dGV4dDogc1RleHQuY2hhckF0KGkpLFxyXG5cdFx0XHRcdFx0Y2xhc3M6ICdjaGFyIGNoYXItJysgKGwrMSlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0ZUVsZW0uYXBwZW5kKGVDaGFyKTtcclxuXHRcdFx0bCsrO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxub0xuZyA9IHtcclxuXHRzRGVmYXVsdDogJ3J1JyxcclxuXHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuXHRcdGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG5nJykpIF90aGlzLnNEZWZhdWx0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xuZycpO1xyXG5cclxuXHRcdCQuZ2V0SlNPTignL2xhbmcuanNvbicsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdF90aGlzLm9TdHJpbmdzID0gZGF0YTtcclxuXHJcblx0XHRcdF90aGlzLnRvZ2dsZXIoJCgnW2RhdGEtbG5nPVwiJysgX3RoaXMuc0RlZmF1bHQgKydcIl0nKSk7XHJcblxyXG5cdFx0XHRfdGhpcy5zZXQoX3RoaXMuc0RlZmF1bHQsIGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdFx0JCgnW2RhdGEtbG5nXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdF90aGlzLnRvZ2dsZXIoJCh0aGlzKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHR9KS5mYWlsKGZ1bmN0aW9uIChlLCB0eXBlLCBpbmZvKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoaW5mbyk7XHJcbiAgICBcdH0pOztcclxuXHR9LFxyXG5cdHRvZ2dsZXI6IGZ1bmN0aW9uIChlRWxlbSkge1xyXG5cdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHJcblx0XHRlRWxlbS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHR2YXIgbG5nID0gZUVsZW0uZGF0YSgnbG5nJyk7XHJcblxyXG5cdFx0X3RoaXMuc2V0KGxuZywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRoZWFkZXJUeXBpbmcoKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0c2V0OiBmdW5jdGlvbiAobG5nLCBmKSB7XHJcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdFx0aWYgKCFfdGhpcy5vU3RyaW5nc1tsbmddKSBsbmcgPSBfdGhpcy5zRGVmYXVsdDtcclxuXHJcblx0XHRfdGhpcy5zQ3VycmVudCA9IGxuZztcclxuXHJcblx0XHQkKCdbbG5nc3RyXScpLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuXHRcdFx0dmFyIHNOYW1lID0gJCh0aGlzKS5hdHRyKCdsbmdzdHInKTtcclxuXHRcdFx0JCh0aGlzKS5hbmltYXRlKHtvcGFjaXR5OiAwfSwgMjAwLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5odG1sKF90aGlzLm9TdHJpbmdzW2xuZ11bc05hbWVdKTtcclxuXHRcdFx0XHQkKHRoaXMpLmFuaW1hdGUoe29wYWNpdHk6IDF9LCAyMDAsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGlmICgkKCdbbG5nc3RyXScpLmxlbmd0aCA9PSBpKzEpIHtcclxuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBmID09ICdmdW5jdGlvbicpIGYoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSlcclxuXHRcdFx0XHJcblx0XHR9KVxyXG5cclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsbmcnLCBsbmcpO1xyXG5cclxuXHRcdHZhciBzVXJsID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsnLy8nKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuXHRcdHNVcmwgPSBzVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7XHJcblx0XHRpZiAobG5nICE9ICdydScpIHNVcmwgKz0gJz9sbmc9JysgbG5nO1xyXG5cdFx0d2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCBudWxsLCBzVXJsKTtcclxuXHR9XHJcbn1cclxuXHJcbm9OYXYgPSB7XHJcblx0aGFzaDogJycsXHJcblx0ZWxlbXM6IG51bGwsXHJcblx0aXN0aW1lb3V0OiBmYWxzZSxcclxuXHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHR0aGlzLmVsZW1zID0gJCgnLnNlY3Rpb25baWRdJyk7XHJcblx0XHRvTmF2LnVwZCgpO1xyXG5cdH0sXHJcblx0dXBkOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAob05hdi5pc3RpbWVvdXQpIGNsZWFyVGltZW91dChvTmF2LmlzdGltZW91dCk7XHJcblxyXG5cdFx0b05hdi5pc3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0b05hdi5lbGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAoaXNFbGVtZW50T25TY3JlZW4oJCh0aGlzKSkpIHtcclxuXHRcdFx0XHRcdG9OYXYuZWxlbXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHRvTmF2Lmhhc2ggPSAnIycrICQodGhpcykuYXR0cignaWQnKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0b05hdi5oYXNoID0gJyc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0b05hdi5zZXQoKTtcclxuXHRcdH0sIDIwKTtcclxuXHR9LFxyXG5cdHNldDogZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKG9OYXYuaGFzaC5sZW5ndGggPiAwKSBcclxuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgb05hdi5oYXNoKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUlzQ2xpY2sgKCkge1xyXG5cdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2lzLWNsaWNrJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRWxlbWVudE9uU2NyZWVuIChlbGVtKSB7XHJcblx0dmFyIHdpbiA9ICQod2luZG93KSxcclxuXHRcdHRvcFNjcmVlbiA9IHdpbi5zY3JvbGxUb3AoKSxcclxuXHRcdGJvdHRvbVNjcmVlbiA9IHRvcFNjcmVlbiArIHdpbi5oZWlnaHQoKSxcclxuXHRcdG1pZGRsZVNjcmVlbiA9IHRvcFNjcmVlbiArIHdpbi5oZWlnaHQoKSAvIDIsXHJcblx0XHR0b3BFbGVtID0gZWxlbS5vZmZzZXQoKS50b3AsXHJcblx0XHRib3R0b21FbGVtID0gdG9wRWxlbSArIGVsZW0uaGVpZ2h0KCk7XHJcblx0Ly9yZXR1cm4gKChib3R0b21FbGVtIDw9IGJvdHRvbVNjcmVlbikgJiYgKHRvcEVsZW0gPj0gdG9wU2NyZWVuKSk7XHJcblx0cmV0dXJuICgodG9wRWxlbSA8IGJvdHRvbVNjcmVlbikgJiYgKHRvcEVsZW0gPj0gdG9wU2NyZWVuKSB8fCAodG9wRWxlbSA8IHRvcFNjcmVlbikgJiYgKGJvdHRvbUVsZW0gPiBtaWRkbGVTY3JlZW4pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVwbGFjZUF0IChzLCBuLCB0KSB7XHJcblx0cmV0dXJuIHMuc3Vic3RyaW5nKDAsIG4pICsgdCArIHMuc3Vic3RyaW5nKG4gKyAxKTtcclxufVxyXG5cclxuKGZ1bmN0aW9uICgkKSB7XHJcblx0ZnVuY3Rpb24gZWxlbWVudFRleHQgKGVsLCBzZXBhcmF0b3IpIHtcclxuXHRcdHZhciB0ZXh0Q29udGVudHMgPSBbXTtcclxuXHRcdGZvcih2YXIgY2hsZCA9IGVsLmZpcnN0Q2hpbGQ7IGNobGQ7IGNobGQgPSBjaGxkLm5leHRTaWJsaW5nKSB7XHJcblx0XHRcdGlmIChjaGxkLm5vZGVUeXBlID09IDMpIHsgXHJcblx0XHRcdFx0dGV4dENvbnRlbnRzLnB1c2goY2hsZC5ub2RlVmFsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGV4dENvbnRlbnRzLmpvaW4oc2VwYXJhdG9yKTtcclxuXHR9XHJcblx0JC5mbi50ZXh0Tm9kZSA9IGZ1bmN0aW9uIChlbGVtZW50U2VwYXJhdG9yLCBub2RlU2VwYXJhdG9yKSB7XHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aDwyKXtub2RlU2VwYXJhdG9yPVwiXCI7fVxyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGg8MSl7ZWxlbWVudFNlcGFyYXRvcj1cIlwiO31cclxuXHRcdHJldHVybiAkLm1hcCh0aGlzLCBmdW5jdGlvbiAoZWwpIHtcclxuXHRcdFx0cmV0dXJuIGVsZW1lbnRUZXh0KGVsLCBub2RlU2VwYXJhdG9yKTtcclxuXHRcdH0pLmpvaW4oZWxlbWVudFNlcGFyYXRvcik7XHJcblx0fVxyXG59IChqUXVlcnkpKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgeyBcclxuXHR2YXIgZVByZWxvYWQgPSAkKCcjcHJlbG9hZGVyJyk7XHJcblx0ZVByZWxvYWQuYWRkQ2xhc3MoJ2xvYWQnKVxyXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0ZVByZWxvYWQuaGlkZSgpXHJcblx0fSwgNjAwKSBcclxufSk7Il19
