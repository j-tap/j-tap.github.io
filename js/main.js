function headerTyping(){var t=$(".header-logo");t.find(".char").remove();var n=t.children("span"),e=t.children("small"),i=0;function o(t,n){for(var e=0;e<n.length;e++){var o=$("<span/>",{text:n.charAt(e),class:"char char-"+(i+1)});t.append(o),i++}}o(n,n.children("span").textNode()),o(e,e.children("span").textNode())}function toggleIsClick(){$(this).toggleClass("is-click")}function isElementOnScreen(t){var n=$(window),e=n.scrollTop(),o=e+n.height(),i=e+n.height()/2,a=t.offset().top,s=a+t.height();return a<o&&e<=a||a<e&&i<s}function replaceAt(t,n,e){return t.substring(0,n)+e+t.substring(n+1)}$(function(){oLng.init(),oNav.init(),$(document).on("scroll",function(t){oNav.upd()})}),oLng={sDefault:"ru",init:function(){var n=this,e=new URL(window.location).searchParams.get("lng");localStorage.getItem("lng")&&(n.sDefault=localStorage.getItem("lng")),$.getJSON("/lang.json",function(t){n.oStrings=t,e&&e!==n.sDefault&&void 0!==n.oStrings[e]&&(n.sDefault=e),n.toggler($('[data-lng="'+n.sDefault+'"]')),n.set(n.sDefault,function(){$("[data-lng]").click(function(){n.toggler($(this))})})}).fail(function(t,n,e){console.error(e)})},toggler:function(t){t.addClass("active").siblings().removeClass("active");var n=t.data("lng");this.set(n,function(){headerTyping()})},set:function(e,o){var i=this;i.oStrings[e]||(e=i.sDefault),i.sCurrent=e,$("[lngstr]").each(function(t){var n=$(this).attr("lngstr");$(this).animate({opacity:0},200,function(){void 0!==i.oStrings[e]&&($(this).html(i.oStrings[e][n]),$(this).animate({opacity:1},200,function(){$("[lngstr]").length===t+1&&"function"==typeof o&&o()}))})}),localStorage.setItem("lng",e);var t=window.location.protocol+"//"+window.location.host+window.location.pathname;t=t.replace(/\/$/,""),"ru"!==e&&(t+="?lng="+e),window.history.pushState({},null,t)}},oNav={hash:"",elems:null,istimeout:!1,init:function(){this.elems=$(".section[id]"),oNav.upd()},upd:function(){oNav.istimeout&&clearTimeout(oNav.istimeout),oNav.istimeout=setTimeout(function(){oNav.elems.each(function(){if(isElementOnScreen($(this)))return oNav.elems.removeClass("active"),$(this).addClass("active"),oNav.hash="#"+$(this).attr("id"),!1;oNav.hash=""}),oNav.set()},20)},set:function(){0<oNav.hash.length?history.pushState(null,null,oNav.hash):history.pushState(null,null,window.location.pathname+window.location.search)}},function(e){e.fn.textNode=function(t,n){return arguments.length<2&&(n=""),arguments.length<1&&(t=""),e.map(this,function(t){return function(t,n){for(var e=[],o=t.firstChild;o;o=o.nextSibling)3===o.nodeType&&e.push(o.nodeValue);return e.join(n)}(t,n)}).join(t)}}(jQuery),$(document).ready(function(){var t=$("#preloader");t.addClass("load"),setTimeout(function(){t.hide()},600)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGVhZGVyVHlwaW5nIiwiZUxvZ28iLCIkIiwiZmluZCIsInJlbW92ZSIsImVOYW1lIiwiY2hpbGRyZW4iLCJlU3RhdHVzIiwibCIsIl9hY3Rpb24iLCJlRWxlbSIsInNUZXh0IiwiaSIsImxlbmd0aCIsImVDaGFyIiwidGV4dCIsImNoYXJBdCIsImNsYXNzIiwiYXBwZW5kIiwidGV4dE5vZGUiLCJ0b2dnbGVJc0NsaWNrIiwidGhpcyIsInRvZ2dsZUNsYXNzIiwiaXNFbGVtZW50T25TY3JlZW4iLCJlbGVtIiwid2luIiwid2luZG93IiwidG9wU2NyZWVuIiwic2Nyb2xsVG9wIiwiYm90dG9tU2NyZWVuIiwiaGVpZ2h0IiwibWlkZGxlU2NyZWVuIiwidG9wRWxlbSIsIm9mZnNldCIsInRvcCIsImJvdHRvbUVsZW0iLCJyZXBsYWNlQXQiLCJzIiwibiIsInQiLCJzdWJzdHJpbmciLCJvTG5nIiwiaW5pdCIsIm9OYXYiLCJkb2N1bWVudCIsIm9uIiwiZSIsInVwZCIsInNEZWZhdWx0IiwiX3RoaXMiLCJsbmciLCJVUkwiLCJsb2NhdGlvbiIsInNlYXJjaFBhcmFtcyIsImdldCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnZXRKU09OIiwiZGF0YSIsIm9TdHJpbmdzIiwidW5kZWZpbmVkIiwidG9nZ2xlciIsInNldCIsImNsaWNrIiwiZmFpbCIsInR5cGUiLCJpbmZvIiwiY29uc29sZSIsImVycm9yIiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwiZiIsInNDdXJyZW50IiwiZWFjaCIsInNOYW1lIiwiYXR0ciIsImFuaW1hdGUiLCJvcGFjaXR5IiwiaHRtbCIsInNldEl0ZW0iLCJzVXJsIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImhhc2giLCJlbGVtcyIsImlzdGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJmbiIsImVsZW1lbnRTZXBhcmF0b3IiLCJub2RlU2VwYXJhdG9yIiwiYXJndW1lbnRzIiwibWFwIiwiZWwiLCJzZXBhcmF0b3IiLCJ0ZXh0Q29udGVudHMiLCJjaGxkIiwiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwibm9kZVR5cGUiLCJwdXNoIiwibm9kZVZhbHVlIiwiam9pbiIsImVsZW1lbnRUZXh0IiwialF1ZXJ5IiwicmVhZHkiLCJlUHJlbG9hZCIsImhpZGUiXSwibWFwcGluZ3MiOiJBQVdBLFNBQVNBLGVBQ1IsSUFBSUMsRUFBUUMsRUFBRSxnQkFDZEQsRUFBTUUsS0FBSyxTQUFTQyxTQUVwQixJQUFJQyxFQUFRSixFQUFNSyxTQUFTLFFBQzFCQyxFQUFVTixFQUFNSyxTQUFTLFNBQ3pCRSxFQUFJLEVBS0wsU0FBU0MsRUFBU0MsRUFBT0MsR0FDeEIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FDdEMsSUFBSUUsRUFBUVosRUFBRSxVQUFXLENBQ3ZCYSxLQUFNSixFQUFNSyxPQUFPSixHQUNuQkssTUFBTyxjQUFlVCxFQUFFLEtBRTFCRSxFQUFNUSxPQUFPSixHQUNiTixLQVZGQyxFQUFRSixFQUFPQSxFQUFNQyxTQUFTLFFBQVFhLFlBQ3RDVixFQUFRRixFQUFTQSxFQUFRRCxTQUFTLFFBQVFhLFlBb0gzQyxTQUFTQyxnQkFDUmxCLEVBQUVtQixNQUFNQyxZQUFZLFlBR3JCLFNBQVNDLGtCQUFtQkMsR0FDM0IsSUFBSUMsRUFBTXZCLEVBQUV3QixRQUNYQyxFQUFZRixFQUFJRyxZQUNoQkMsRUFBZUYsRUFBWUYsRUFBSUssU0FDL0JDLEVBQWVKLEVBQVlGLEVBQUlLLFNBQVcsRUFDMUNFLEVBQVVSLEVBQUtTLFNBQVNDLElBQ3hCQyxFQUFhSCxFQUFVUixFQUFLTSxTQUU3QixPQUFTRSxFQUFVSCxHQUE2QkYsR0FBWEssR0FBMEJBLEVBQVVMLEdBQTRCSSxFQUFiSSxFQUd6RixTQUFTQyxVQUFXQyxFQUFHQyxFQUFHQyxHQUN6QixP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RCxPQUFPMEIsU0FBU3lDLFVBdUIzRSxTQUFVM0YsR0FVVkEsRUFBRTRGLEdBQUczRSxTQUFXLFNBQVU0RSxFQUFrQkMsR0FHM0MsT0FGSUMsVUFBVXBGLE9BQU8sSUFBR21GLEVBQWMsSUFDbENDLFVBQVVwRixPQUFPLElBQUdrRixFQUFpQixJQUNsQzdGLEVBQUVnRyxJQUFJN0UsS0FBTSxTQUFVOEUsR0FDNUIsT0FiRixTQUFzQkEsRUFBSUMsR0FFekIsSUFEQSxJQUFJQyxFQUFlLEdBQ1hDLEVBQU9ILEVBQUdJLFdBQVlELEVBQU1BLEVBQU9BLEVBQUtFLFlBQ3pCLElBQWxCRixFQUFLRyxVQUNSSixFQUFhSyxLQUFLSixFQUFLSyxXQUd6QixPQUFPTixFQUFhTyxLQUFLUixHQU1qQlMsQ0FBWVYsRUFBSUgsS0FDckJZLEtBQUtiLElBZlYsQ0FpQkdlLFFBRUg1RyxFQUFFMEMsVUFBVW1FLE1BQU0sV0FDakIsSUFBSUMsRUFBVzlHLEVBQUUsY0FDakI4RyxFQUFTM0MsU0FBUyxRQUNsQnVCLFdBQVcsV0FDVm9CLEVBQVNDLFFBQ1AiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuXHRvTG5nLmluaXQoKTtcclxuXHJcblx0b05hdi5pbml0KCk7XHJcblx0JChkb2N1bWVudCkub24oJ3Njcm9sbCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRvTmF2LnVwZCgpO1xyXG5cdH0pO1xyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiBoZWFkZXJUeXBpbmcgKCkge1xyXG5cdHZhciBlTG9nbyA9ICQoJy5oZWFkZXItbG9nbycpO1xyXG5cdGVMb2dvLmZpbmQoJy5jaGFyJykucmVtb3ZlKCk7XHJcblxyXG5cdHZhciBlTmFtZSA9IGVMb2dvLmNoaWxkcmVuKCdzcGFuJyksXHJcblx0XHRlU3RhdHVzID0gZUxvZ28uY2hpbGRyZW4oJ3NtYWxsJyksXHJcblx0XHRsID0gMDtcclxuXHJcblx0X2FjdGlvbihlTmFtZSwgZU5hbWUuY2hpbGRyZW4oJ3NwYW4nKS50ZXh0Tm9kZSgpKTtcclxuXHRfYWN0aW9uKGVTdGF0dXMsIGVTdGF0dXMuY2hpbGRyZW4oJ3NwYW4nKS50ZXh0Tm9kZSgpKTtcclxuXHJcblx0ZnVuY3Rpb24gX2FjdGlvbiAoZUVsZW0sIHNUZXh0KSB7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNUZXh0Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBlQ2hhciA9ICQoJzxzcGFuLz4nLCB7XHJcblx0XHRcdFx0XHR0ZXh0OiBzVGV4dC5jaGFyQXQoaSksXHJcblx0XHRcdFx0XHRjbGFzczogJ2NoYXIgY2hhci0nKyAobCsxKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRlRWxlbS5hcHBlbmQoZUNoYXIpO1xyXG5cdFx0XHRsKys7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5vTG5nID0ge1xyXG5cdHNEZWZhdWx0OiAncnUnLFxyXG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XHJcblx0XHRcclxuXHRcdHZhciB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbik7XHJcblx0XHR2YXIgbG5nID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2xuZycpO1xyXG5cdFx0XHJcblx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xuZycpKSBfdGhpcy5zRGVmYXVsdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsbmcnKTtcdFx0XHJcblxyXG5cdFx0JC5nZXRKU09OKCcvbGFuZy5qc29uJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0X3RoaXMub1N0cmluZ3MgPSBkYXRhO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGxuZyAmJiBsbmcgIT09IF90aGlzLnNEZWZhdWx0ICYmIF90aGlzLm9TdHJpbmdzW2xuZ10gIT09IHVuZGVmaW5lZCkgXHJcblx0XHRcdFx0X3RoaXMuc0RlZmF1bHQgPSBsbmc7XHJcblxyXG5cdFx0XHRfdGhpcy50b2dnbGVyKCQoJ1tkYXRhLWxuZz1cIicrIF90aGlzLnNEZWZhdWx0ICsnXCJdJykpO1xyXG5cclxuXHRcdFx0X3RoaXMuc2V0KF90aGlzLnNEZWZhdWx0LCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdCQoJ1tkYXRhLWxuZ10nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRfdGhpcy50b2dnbGVyKCQodGhpcykpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pLmZhaWwoZnVuY3Rpb24gKGUsIHR5cGUsIGluZm8pIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihpbmZvKTtcclxuICAgIFx0fSk7O1xyXG5cdH0sXHJcblx0dG9nZ2xlcjogZnVuY3Rpb24gKGVFbGVtKSB7XHJcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuXHRcdGVFbGVtLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdHZhciBsbmcgPSBlRWxlbS5kYXRhKCdsbmcnKTtcclxuXHJcblx0XHRfdGhpcy5zZXQobG5nLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGhlYWRlclR5cGluZygpO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHRzZXQ6IGZ1bmN0aW9uIChsbmcsIGYpIHtcclxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XHJcblx0XHRpZiAoIV90aGlzLm9TdHJpbmdzW2xuZ10pIGxuZyA9IF90aGlzLnNEZWZhdWx0O1xyXG5cclxuXHRcdF90aGlzLnNDdXJyZW50ID0gbG5nO1xyXG5cclxuXHRcdCQoJ1tsbmdzdHJdJykuZWFjaChmdW5jdGlvbiAoaSkge1xyXG5cdFx0XHR2YXIgc05hbWUgPSAkKHRoaXMpLmF0dHIoJ2xuZ3N0cicpO1xyXG5cdFx0XHQkKHRoaXMpLmFuaW1hdGUoe29wYWNpdHk6IDB9LCAyMDAsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAoX3RoaXMub1N0cmluZ3NbbG5nXSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JCh0aGlzKS5odG1sKF90aGlzLm9TdHJpbmdzW2xuZ11bc05hbWVdKTtcclxuXHRcdFx0XHQkKHRoaXMpLmFuaW1hdGUoe29wYWNpdHk6IDF9LCAyMDAsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGlmICgkKCdbbG5nc3RyXScpLmxlbmd0aCA9PT0gaSsxKSB7XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJykgZigpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHR9KTtcclxuXHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG5nJywgbG5nKTtcclxuXHJcblx0XHR2YXIgc1VybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArJy8vJysgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcblx0XHRzVXJsID0gc1VybC5yZXBsYWNlKC9cXC8kLywgJycpO1xyXG5cdFx0XHJcblx0XHRpZiAobG5nICE9PSAncnUnKSBzVXJsICs9ICc/bG5nPScrIGxuZztcclxuXHRcdHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgbnVsbCwgc1VybCk7XHJcblx0fVxyXG59O1xyXG5cclxub05hdiA9IHtcclxuXHRoYXNoOiAnJyxcclxuXHRlbGVtczogbnVsbCxcclxuXHRpc3RpbWVvdXQ6IGZhbHNlLFxyXG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHRoaXMuZWxlbXMgPSAkKCcuc2VjdGlvbltpZF0nKTtcclxuXHRcdG9OYXYudXBkKCk7XHJcblx0fSxcclxuXHR1cGQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmIChvTmF2LmlzdGltZW91dCkgY2xlYXJUaW1lb3V0KG9OYXYuaXN0aW1lb3V0KTtcclxuXHJcblx0XHRvTmF2LmlzdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRvTmF2LmVsZW1zLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmIChpc0VsZW1lbnRPblNjcmVlbigkKHRoaXMpKSkge1xyXG5cdFx0XHRcdFx0b05hdi5lbGVtcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHRcdG9OYXYuaGFzaCA9ICcjJysgJCh0aGlzKS5hdHRyKCdpZCcpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRvTmF2Lmhhc2ggPSAnJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRvTmF2LnNldCgpO1xyXG5cdFx0fSwgMjApO1xyXG5cdH0sXHJcblx0c2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAob05hdi5oYXNoLmxlbmd0aCA+IDApIFxyXG5cdFx0XHRoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBvTmF2Lmhhc2gpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuXHR9XHJcbn07XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVJc0NsaWNrICgpIHtcclxuXHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1jbGljaycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0VsZW1lbnRPblNjcmVlbiAoZWxlbSkge1xyXG5cdHZhciB3aW4gPSAkKHdpbmRvdyksXHJcblx0XHR0b3BTY3JlZW4gPSB3aW4uc2Nyb2xsVG9wKCksXHJcblx0XHRib3R0b21TY3JlZW4gPSB0b3BTY3JlZW4gKyB3aW4uaGVpZ2h0KCksXHJcblx0XHRtaWRkbGVTY3JlZW4gPSB0b3BTY3JlZW4gKyB3aW4uaGVpZ2h0KCkgLyAyLFxyXG5cdFx0dG9wRWxlbSA9IGVsZW0ub2Zmc2V0KCkudG9wLFxyXG5cdFx0Ym90dG9tRWxlbSA9IHRvcEVsZW0gKyBlbGVtLmhlaWdodCgpO1xyXG5cdC8vcmV0dXJuICgoYm90dG9tRWxlbSA8PSBib3R0b21TY3JlZW4pICYmICh0b3BFbGVtID49IHRvcFNjcmVlbikpO1xyXG5cdHJldHVybiAoKHRvcEVsZW0gPCBib3R0b21TY3JlZW4pICYmICh0b3BFbGVtID49IHRvcFNjcmVlbikgfHwgKHRvcEVsZW0gPCB0b3BTY3JlZW4pICYmIChib3R0b21FbGVtID4gbWlkZGxlU2NyZWVuKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcGxhY2VBdCAocywgbiwgdCkge1xyXG5cdHJldHVybiBzLnN1YnN0cmluZygwLCBuKSArIHQgKyBzLnN1YnN0cmluZyhuICsgMSk7XHJcbn1cclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG5cdGZ1bmN0aW9uIGVsZW1lbnRUZXh0IChlbCwgc2VwYXJhdG9yKSB7XHJcblx0XHR2YXIgdGV4dENvbnRlbnRzID0gW107XHJcblx0XHRmb3IodmFyIGNobGQgPSBlbC5maXJzdENoaWxkOyBjaGxkOyBjaGxkID0gY2hsZC5uZXh0U2libGluZykge1xyXG5cdFx0XHRpZiAoY2hsZC5ub2RlVHlwZSA9PT0gMykgeyBcclxuXHRcdFx0XHR0ZXh0Q29udGVudHMucHVzaChjaGxkLm5vZGVWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB0ZXh0Q29udGVudHMuam9pbihzZXBhcmF0b3IpO1xyXG5cdH1cclxuXHQkLmZuLnRleHROb2RlID0gZnVuY3Rpb24gKGVsZW1lbnRTZXBhcmF0b3IsIG5vZGVTZXBhcmF0b3IpIHtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoPDIpe25vZGVTZXBhcmF0b3I9XCJcIjt9XHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aDwxKXtlbGVtZW50U2VwYXJhdG9yPVwiXCI7fVxyXG5cdFx0cmV0dXJuICQubWFwKHRoaXMsIGZ1bmN0aW9uIChlbCkge1xyXG5cdFx0XHRyZXR1cm4gZWxlbWVudFRleHQoZWwsIG5vZGVTZXBhcmF0b3IpO1xyXG5cdFx0fSkuam9pbihlbGVtZW50U2VwYXJhdG9yKTtcclxuXHR9O1xyXG59IChqUXVlcnkpKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgeyBcclxuXHR2YXIgZVByZWxvYWQgPSAkKCcjcHJlbG9hZGVyJyk7XHJcblx0ZVByZWxvYWQuYWRkQ2xhc3MoJ2xvYWQnKTtcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdGVQcmVsb2FkLmhpZGUoKTtcclxuXHR9LCA2MDApO1xyXG59KTsiXX0=
